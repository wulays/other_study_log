#### 简介

**Docker 是什么**

是一种创建和使用 Linux 容器的容器化技术，而容器就是一种打包技术，就像去露营一样，传统方式你得搭帐篷，睡袋，路子什么的，都得一个一个手动搭建好。而容器化就像房车一样，里面的东西都准备齐全了，到了目的地不需要再去手动安装，只需要打开房车门就可以是哦那个了，在每个地方的运行环境都是一样的。这样就确保了任何环境下都能以相同的方式运行起来，不用担心常说的 “我的电脑上没有问题，到你那就不行了”

毕竟基于 Linux 容器实现的，Linux 好说直接共享同样的内核就可以了，在 Windows 和 Mac 上就是使用虚拟机来实现了，内置一个轻量的虚拟机来运行 Linux 内核，另外在Win10 之后，还可以使用 WSL 来实现无需额外虚拟机，性能和体验都有提升

**什么是容器**

就像一个一个的集装箱，根据不同的货物可以改变不同的内部环境，如需要装活鱼就可以在箱子里注水，再放入鱼，如果是树木，就可能需要土壤。每个集装箱都是不同的，也都可以装不同类型的东西或者说软件，环境也是分离开的。无论箱子在哪里打开就能用到里面的东西。

就像一个盒子里面可以装各种软件，每一个的软件环境都是提前配置好了的，需要用到的时候直接运行就可以了。而且每一个箱子都是分离开来的也不会有冲突，这就很简单方便了

**是什么镜像**

什么是镜像就是对布置好的集装箱，拍了一个照片，下一次还想要一个这种集装箱就照着这个去创建一个一模一样的集装箱，就像一个模板一样，可以再次创建一个一模一样的集装箱实例，也可以很方便的分享给别人。


#### 运行一个容器

在 docker 安装完成之后可以使用

```shell
docker run hello-world

# 输出 Hello from Docker! 巴拉巴拉
```

这个命令会从 Docker Hub 下载一个测试镜像并在一个新容器中运行它。

> Docker Hub 就是一个仓库，上面是存储 Docker 镜像和分享的地方，类似于 GitHub

这是一个很常用的命令，`docker run 镜像名称` 从本地仓库或者远程仓库获取这个镜像，再根据这个镜像去创建一个新的容器。

如需要在 docker  上运行一个 `nginx`

```bash
docker run nginx
```

这个时候就会发现，运行时运行了，但是吧终端被它给我占用了，毕竟是一个服务，而不是执行完命令就结束了，z这个终端关了服务也就停了。这个时候就可以考虑在运行的时候加上一些参数来改变这种情况了，如不想让他占用我们的终端，让他在后台运行，可以使用参数 `-d`  表示后台模式

```bash
docker run -d nginx
```

参数在镜像名称前面，这个时候会返回一串容器的`id`值 可以根据这个 `id` 来管理这个容器，运行时运行了，可是要怎么才能看到运行的这些容器呢

```bash
docker ps
```

就可以查看到运行的容器列表了，如果要查看包括未运行的容器可以加上参数 `-a`

不过这也太长了吧，根本记不，这个时候还可以加一些参数在运行的时候指定一个名称什么的 `--name`

```bash
docker run -d --name nginx-demo nginx
```

这样下次就知道这个容器时哪一个了

既然启动的是一个服务，那自然是需要去访问这个服务的，但是现在并不能访问这个服务，因为它是在集装箱里面提供服务，我们却在集装箱外面，这个时候就需要这个集装箱开一个窗口了，来对外进行服务，使用`-p` 参数对端口进行映射，也就在外面开启一个对外服务的窗口，然后通过这个窗口就可以来到集装箱里面的窗口来使用这个服务

```bash
docker run -d -p 8888:80 --name nginx-demo nginx
```

这个时候再去使用 `localhost:8888` 就可以访问到容器里面的 `nginx` 提供的服务了

如果不想让他提供服务了可以使用

```bash
docker stop nginx-demo
```

这样就可以停止一个正在运行的服务了，不过虽然停止了，但是这个容器依然还是在的，可以再次重启它

```bash
docker start nginx-demo
```

这样就能再次启动这个服务了，也可以在运行的时候直接重启它

```bash
docker restart nginx-demo
```

当想删除一个容器的时候也可以使用 

```bash
docker rm nginx-demo
```

这样就可以去删除一个容器了，不过在删除的时候需要停止这个容器